/*! For license information please see sdk.inapp.cdnHelper.js.LICENSE.txt */
(()=>{var e={877:(e,t,o)=>{var a=o(570),n=o(171);(o=n).v1=a,o.v4=n,e.exports=o},327:e=>{for(var t=[],o=0;o<256;++o)t[o]=(o+256).toString(16).substr(1);e.exports=function(e,o){var a=o||0;return[(o=t)[e[a++]],o[e[a++]],o[e[a++]],o[e[a++]],"-",o[e[a++]],o[e[a++]],"-",o[e[a++]],o[e[a++]],"-",o[e[a++]],o[e[a++]],"-",o[e[a++]],o[e[a++]],o[e[a++]],o[e[a++]],o[e[a++]],o[e[+a]]].join("")}},217:e=>{var t,o,a="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);a?(t=new Uint8Array(16),e.exports=function(){return a(t),t}):(o=new Array(16),e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),o[t]=e>>>((3&t)<<3)&255;return o})},570:(e,t,o)=>{var a,n,r=o(217),l=o(327),i=0,s=0;e.exports=function(e,t,o){var c=t&&o||0,g=t||[],d=(e=e||{}).node||a,u=void 0!==e.clockseq?e.clockseq:n;null!=d&&null!=u||(m=r(),null==d&&(d=a=[1|m[0],m[1],m[2],m[3],m[4],m[5]]),null==u&&(u=n=16383&(m[6]<<8|m[7])));var p=void 0!==e.msecs?e.msecs:(new Date).getTime(),m=(o=void 0!==e.nsecs?e.nsecs:s+1,p-i+(o-s)/1e4);if(m<0&&void 0===e.clockseq&&(u=u+1&16383),1e4<=(o=(m<0||i<p)&&void 0===e.nsecs?0:o))throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");i=p,n=u,o=(1e4*(268435455&(p+=122192928e5))+(s=o))%4294967296,g[c++]=o>>>24&255,g[c++]=o>>>16&255,g[c++]=o>>>8&255,g[c++]=255&o,p=p/4294967296*1e4&268435455,g[c++]=p>>>8&255,g[c++]=255&p,g[c++]=p>>>24&15|16,g[c++]=p>>>16&255,g[c++]=u>>>8|128,g[c++]=255&u;for(var f=0;f<6;++f)g[c+f]=d[f];return t||l(g)}},171:(e,t,o)=>{var a=o(217),n=o(327);e.exports=function(e,t,o){var r=t&&o||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var l=(e=e||{}).random||(e.rng||a)();if(l[6]=15&l[6]|64,l[8]=63&l[8]|128,t)for(var i=0;i<16;++i)t[r+i]=l[i];return t||n(l)}}},t={};function o(a){var n=t[a];return void 0!==n||(n=t[a]={exports:{}},e[a](n,n.exports,o)),n.exports}o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var a={};(()=>{"use strict";function e(t,o,a){return null!=t&&o?(t=t[(o=Array.isArray(o)?o:o.split("."))[0]])&&1<o.length?e(t,o.slice(1),a):void 0===t?a||null:t:null}o.r(a);var t=o(877);class n{constructor(e,t){this.channel=e,this.target=t}sendMessage(e,o){return new Promise(((a,n)=>{var r={id:(0,t.v4)(),channel:this.channel,topic:e,message:o};this.addToListener(r,a,n),this.target instanceof HTMLIFrameElement?this.target.contentWindow.postMessage(r,this.target.src):this.target.postMessage(r,"*")}))}static listenToChannel(e,t,o){window.addEventListener("message",(a=>{a.data&&a.data.channel&&a.data.topic&&a.data.channel===e&&a.data.topic===t&&o(a.data,(o=>{o={id:a.data.id,channel:e,topic:t,message:o},a.source.postMessage(o,a.origin)}))}))}addToListener(t,o,a){n.pendingPromises[t.id]={resolve:o,reject:a},window.addEventListener("message",(t=>{t.data&&e(t.data,"channel",null)===this.channel&&null!=n.pendingPromises[t.data.id]&&(n.pendingPromises[t.data.id].resolve(t.data),delete n.pendingPromises[t.data.id])}))}}n.pendingPromises={};const r="unifiedLogs",l=2,i="web_personalization",s={CLICK:"MOE_ONSITE_MESSAGE_CLICKED",IMPRESSION:"MOE_ONSITE_MESSAGE_SHOWN",DISMISS:"MOE_ONSITE_MESSAGE_DISMISSED",AUTO_DISMIS:"MOE_ONSITE_MESSAGE_AUTO_DISMISS",TYPE:"onsite"},c="moe_inapp_draft_type",g="moe_inapp_draft_id",d="moe_inapp_draft_tag",u="test_campaign_meta",p="test_template_type",m="moe_inapp_draft_variation",f="moe_inapp_draft_locale";s.CLICK,s.IMPRESSION,s.DISMISS,s.AUTO_DISMIS;class h{static set(e,t){h.baseLogTag,window&&(window.moeInternals?window.moeInternals.ephemeral||(window.moeInternals.ephemeral={}):(window.moeInternals={},window.moeInternals.ephemeral={}),window.moeInternals.ephemeral[e]=t)}static get(t){return e(window,"moeInternals.ephemeral."+t,null)}}h.baseLogTag="EphemeralStorage";let v="color: white; background: #41AE55; border-radius: 5px;";class S{static setLogLevel(e,t){var o=S.baseLogTag+".setLogLevel";null==h.get(r)&&h.set(r,[]),null==e?S.logLevel=0:e in[0,1,2]?0<(S.logLevel=e)&&t&&S.releaseAllLogs():S.warn(0,o,"Value",e,"not supported for setDebugLevel(). Current log level is",S.logLevel,". Debug level can only be [0, 1, 2]")}static setLogTabStyle(e){S.tagLogStyle=S.tagLogStyle.replace("#48beab",e)}static log(e,t,o,...a){e<=S.logLevel?console.log("%c "+S.logBrand+" %c %c info %c %c "+t+" ",v,"","color: white; background: #18a0bf; border-radius: 5px;","",S.tagLogStyle,o,...a):S.cacheLog((()=>{S.log(e,t,o,...a)}))}static error(e,t,o,...a){e<=S.logLevel?console.error("%c "+S.logBrand+" %c %c error %c %c "+t+" ",v,"","color: white; background: #cc0a0a; border-radius: 5px;","",S.tagLogStyle,o,...a):S.cacheLog((()=>{S.error(e,t,o,...a)}))}static warn(e,t,o,...a){e<=S.logLevel?console.warn("%c "+S.logBrand+" %c %c warn %c %c "+t+" ",v,"","color: white; background: #e8ab51; border-radius: 5px;","",S.tagLogStyle,o,...a):S.cacheLog((()=>{S.warn(e,t,o,...a)}))}static customLabel(e,t,o,...a){e<=S.logLevel?console.log("%c "+S.logBrand+" %c %c "+t+" %c %c "+o+" %c ",v,"",S.tagLogStyle,"","color: white; background: #a400ff; border-radius: 5px;","",...a):S.cacheLog((()=>{S.customLabel(e,t,o,...a)}))}static image(e,t){e<=S.logLevel?console.log("%c+","font-size: 1px; padding: 20px 80px; line-height: 45px; background: url("+t+"); background-size: 160px 90px; color: transparent;"):S.cacheLog((()=>{S.image(e,t)}))}static releaseAllLogs(){var e=h.get(r),t=e.length;const o=e;if(h.set(r,[]),0<t){S.log(0,"Logger.releaseAllLogs","<---- HISTORICAL LOGS BEGIN ----\x3e");for(let e=0;e<t;e++)o[e]();S.log(0,"Logger.releaseAllLogs","<---- HISTORICAL LOGS END ----\x3e")}}static setLogBrand(e){S.logBrand=e}static setBrandColor(e){v="color: white; background: "+e+"; border-radius: 5px;"}static cacheLog(e){let t=h.get(r);null==t&&(t=[]),t.push(e),h.set(r,t)}}S.baseLogTag="Logger",S.logBrand="MoEngage",S.logLevel=0,S.tagLogStyle="color: white; background: #48beab; border-radius: 5px;";class w{static set(e,t){var o=w.baseTag+".set";null==t?w.remove(e):(t="boolean"==typeof t?JSON.stringify({actualValue:t,MOE_DATA_TYPE:"boolean"}):"string"==typeof t?JSON.stringify({actualValue:t,MOE_DATA_TYPE:"string"}):JSON.stringify(t),S.log(3,o,"Setting ",e,":",t),o=Date.now(),o=";expires="+new Date(o+31536e6*l).toUTCString(),document.cookie=e+"="+encodeURIComponent(t)+o+";domain="+w.getOrigin()+";path=/;SameSite=None; Secure")}static get(t){var o=w.baseTag+".get",a=t+"=",n=decodeURIComponent(document.cookie).split(";");for(let r=n.length-1;0<=r;r--){let l=n[r];for(;" "===l.charAt(0);)l=l.substring(1);if(0===l.indexOf(a)){let n=l.substring(a.length,l.length);try{n=JSON.parse(n),"string"===e(n,"MOE_DATA_TYPE",null)?(n=e(n,"actualValue",null),n=n?String(n):null):"boolean"===e(n,"MOE_DATA_TYPE",null)&&(n=e(n,"actualValue",null))}catch(e){}return S.log(3,o,"Got ",t,":",n),n}}return null}static remove(e){var t=w.baseTag+".remove";document.cookie=e+"=;domain="+w.getOrigin()+";path=/;expires=Thu, 01 Jan 1970 00:00:01 GMT;",S.log(3,t,"Removed ",e)}static setRaw(e,t,o){var a=w.baseTag+".setRaw";if(null==t)w.remove(e);else{S.log(3,a,"Setting ",e,":",t);let n="";null!=o&&(n=";expires="+o.toISOString()),document.cookie=e+"="+encodeURIComponent(t)+n+";domain="+w.getOrigin()+";path=/;"}}static getOrigin(){var e=w.baseTag+".getOrigin";let t=window.location.origin;return t=t.indexOf(".")!==t.lastIndexOf(".")?t.substring(t.indexOf(".")):"."+t.substring(t.lastIndexOf("/")+1),"localhost"===window.location.hostname&&(S.warn(1,e,"Cross domain user persitence will not work with localhost. \n\nWe will save the key-value pairs in the localhost cookie store for reference. You'll be able to test this functionality in a hosted staging/test environment."),t=""),t}}w.baseTag="CookieStorage";var _=()=>{const e=window.location.search.substring(1).split("&"),t={};for(let r=0;r<e.length;r++){var o=e[r].split("="),a=decodeURIComponent(o[0]),n=decodeURIComponent(o[1]);void 0===t[a]?t[a]=decodeURIComponent(n):"string"==typeof t[a]?(o=[t[a],decodeURIComponent(n)],t[a]=o):t[a].push(decodeURIComponent(n))}return t};window.getParams=_;function b(e,t,o){document.cookie=e+"="+t+";expires="+o.toUTCString()+";domain=.moengage.com;path=/;SameSite=None; Secure"}!function(t){if(e(t,"action")&&"inapp_test"===t.action){var o=t.redirect_url,a=t.draft_id,n=t.draft_campaign_tag,r=t.draft_type||i,l=t.template_type||null,s=t.campaign_meta||null,h=t.locale||null;if(t=t.variation||null,null!=o)if(null!=a){if(r!==i||null!=n){const e=new Date;return e.setTime(e.getTime()+3e4),b(c,r,e),b(g,a,e),b(d,n,e),b(u,s,e),b(p,l,e),b(f,h,e),b(m,t,e),window.location.href=o}console.error("Please specify a 'draft_campaign_tag' in the queryParams")}else console.error("Please specify a 'draft_id' in the queryParams");else console.error("Please specify a 'redirect_url' in the queryParams")}}(_()),n.listenToChannel("inapp_helper","COOKIE_STORAGE",((e,t)=>{if(e.message&&"GET"===e.message.TYPE)if(e.message.KEY===g)if(null==(e=w.get(g)))t();else try{t({draft_type:w.get(c),draft_id:e,draft_tag:w.get(d),campaign_meta:w.get(u),template_type:w.get(p),locale:w.get(f),variation:w.get(m)})}catch(e){console.error(e),t()}else t()})),window.getParams=_})()})();